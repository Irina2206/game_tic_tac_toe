window.onload=function(){function e(e,t,n){v.dataset.start=t,e.style.display="none",n.style.display="block"}function t(e){1==e?(T.innerHTML="Ваш ход",T.style.textAlign=I[0],v.dataset.turn="custom"):0==e?(T.innerHTML="Javascript ход",T.style.textAlign=I[2],v.dataset.turn="javascript"):(T.innerHTML="Победили - "+e,T.style.textAlign=I[1],T.classList.add("textWinner"),v.dataset.turn="")}function n(){"no"==v.dataset.start?v.onclick=function(e){return H.classList.add("messageBlock"),console.log("нельзя"),!1}:(clearInterval(d),v.onclick=function(e){x<=9&&a(e.target)})}function a(e){"check"!==e.dataset.check&&"no"!==v.dataset.start&&(e.innerHTML=B,e.setAttribute("data-check","check"),r(),x<9&&(x++,g=setTimeout(c,1500)),o(),"no"!==v.dataset.start&&(s(),l.length>=1&&t(!1)))}function c(){if("no"!==v.dataset.start){var e;!function(){e=9-x,m=function(e,t){return Math.floor(Math.random()*(t-e)+e)}(0,e),o(),l.length>0&&(l[m].innerHTML=u,l[m].setAttribute("data-check","check"),r()),"no"!==v.dataset.start&&(l.length>1&&t(!0),x<9&&x++,s())}()}}function s(){9==x&&(T.innerHTML="Ничья!",T.style.textAlign=I[1],v.dataset.start="no",v.dataset.turn="")}function o(){l=[];for(var e=0;e<S.length;e++)S[e].hasAttribute("data-check")||l.push(S[e])}function r(){for(var e=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]],t=0;t<e.length;t++){var n=e[t];"x"==S[n[0]].innerHTML&&"x"==S[n[1]].innerHTML&&"x"==S[n[2]].innerHTML&&i("крестики!","x"),"o"==S[n[0]].innerHTML&&"o"==S[n[1]].innerHTML&&"o"==S[n[2]].innerHTML&&i("нолики!","o")}}function i(e,n){v.dataset.start="no",t(e),B==n?(document.querySelector(".customWrap img").className="jump",document.querySelector(".customWrap").classList.add("winShadowJump")):(document.querySelector(".jsWrap img").className="jump",document.querySelector(".jsWrap").classList.add("winShadowJump"))}var l,m,u,d,g,h=document.getElementsByTagName("input"),L=document.getElementById("wrapInputs"),p=document.getElementById("choiceX"),y=document.getElementById("choiceO"),f=document.getElementById("btnPlay"),k=document.getElementById("btnAnew"),T=document.getElementById("text"),M=document.querySelector(".customWrap"),w=document.querySelector(".jsWrap"),H=document.querySelector(".messageWrap"),v=document.getElementById("game"),S=document.querySelectorAll("#game > div"),B="x",x=0,I=["left","center","right"];f.onclick=function(n){for(var a=0;a<h.length;a++)h[a].checked&&(B=h[a].value);if(e(n.target,"yes",k),L.className="hideBlock",H.classList.contains("messageBlock")){H.classList.add("messageBlockBack");setTimeout(function(){H.classList.remove("messageBlock","messageBlockBack")},1500)}"x"==B?(M.innerHTML='<img src="img/x_large.png" class="scaleShowImg">',u="o",w.innerHTML='<img src="img/zero_large.png" class="scaleShowImg">',t(!0)):(M.innerHTML='<img src="img/zero_large.png" class="scaleShowImg">',u="x",w.innerHTML='<img src="img/x_large.png" class="scaleShowImg">',t(!1),g=setTimeout(c,1500))},k.onclick=function(t){e(t.target,"no",f),L.classList.remove("hideBlock"),T.innerHTML="",x=0,p.checked=!0,y.checked=!1,M.innerHTML="",w.innerHTML="",(M.classList.contains("winShadowJump")||w.classList.contains("winShadowJump"))&&(M.classList.remove("winShadowJump"),w.classList.remove("winShadowJump"));for(var a=0;a<S.length;a++)S[a].removeAttribute("data-check"),S[a].innerHTML="";d=setInterval(n,1e3)},d=setInterval(n,1e3)};